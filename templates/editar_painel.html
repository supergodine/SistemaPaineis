<!DOCTYPE html>
<html lang="pt-BR">


<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Editar Painel</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.2/dist/umd/popper.min.js"></script>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='imagens/favicon.ico') }}">


    <!-- Script para alternar entre temas -->
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const themeToggleBtn = document.getElementById('theme-toggle');
            const body = document.body;

            // Carregar o tema armazenado
            const currentTheme = localStorage.getItem('theme') || 'light';
            body.classList.add(currentTheme);

            // Adicionar evento de clique para alternar temas
            themeToggleBtn.addEventListener('click', function () {
                body.classList.toggle('dark-theme');
                body.classList.toggle('light-theme');
                const newTheme = body.classList.contains('dark-theme') ? 'dark' : 'light';
                localStorage.setItem('theme', newTheme);
            });
        });

        document.addEventListener('DOMContentLoaded', function () {
            const themeToggle = document.getElementById('themeToggle');
            const themeIcon = document.getElementById('themeIcon');
            const logo = document.getElementById('logoImg');

            // Verifica se há um tema salvo no localStorage
            if (localStorage.getItem('darkTheme') === 'enabled') {
                document.body.classList.add('dark-mode');
                themeIcon.classList.replace('fa-sun', 'fa-moon');
                logo.src = "{{ url_for('static', filename='imagens/logo3.png') }}"; // Muda para logo escura
            }

            themeToggle.addEventListener('click', function () {
                document.body.classList.toggle('dark-mode');
                const darkModeEnabled = document.body.classList.contains('dark-mode');

                if (darkModeEnabled) {
                    themeIcon.classList.replace('fa-sun', 'fa-moon');
                    logo.src = "{{ url_for('static', filename='imagens/logo3.png') }}"; // Muda para logo escura
                    localStorage.setItem('darkTheme', 'enabled');
                } else {
                    themeIcon.classList.replace('fa-moon', 'fa-sun');
                    logo.src = "{{ url_for('static', filename='imagens/logo.png') }}"; // Volta para logo clara
                    localStorage.setItem('darkTheme', 'disabled');
                }
            });
        });



        /**********************inicio coluna**************************/
        function aplicarFormatacaoColuna(colunaElement, fonte, corTexto, alinhamento) {
            colunaElement.style.fontSize = fonte + 'px';
            colunaElement.style.color = corTexto;
            colunaElement.style.textAlign = alinhamento;
        }

        // Exemplo de uso ao salvar a coluna:
        $('#adicionarColunaForm').on('submit', function (event) {
            event.preventDefault();
            const fonte = $('#fonte_coluna').val();
            const corTexto = $('#cor_texto_coluna').val();
            const alinhamento = $('#alinhamento_coluna').val();

            // Aplicar formatação ao elemento da coluna
            const colunaElement = document.createElement('td');
            aplicarFormatacaoColuna(colunaElement, fonte, corTexto, alinhamento);
        });
        // Função para abrir o modal de edição com dados preenchidos
        function abrirModalEditarColuna(id, titulo, atributo, classe, tamanho, numeroApre, escondido, fonte, corTexto, alinhamento, fontBold, fontItalic) {
            console.log({ id, titulo, atributo, classe, tamanho, numeroApre, escondido, fonte, corTexto, alinhamento, fontBold, fontItalic });

            // Preenche os campos do modal com os valores passados
            $('#coluna_id_edit').val(id);
            $('#titulo_coluna_edit').val(titulo);
            $('#atributo_coluna_edit').val(atributo);
            $('#classe_coluna_edit').val(classe);
            $('#tamanho_coluna_edit').val(tamanho);
            $('#numero_apre_coluna_edit').val(numeroApre);
            $('#escondido_coluna_edit').prop('checked', escondido === 'H');
            $('#edit_fonte_coluna').val(fonte);
            $('#edit_cor_texto_coluna').val(corTexto);
            $('#edit_alinhamento_coluna').val(alinhamento);
            $('#edit_font_bold').prop('checked', fontBold === 'Y');
            $('#edit_font_italic').prop('checked', fontItalic === 'Y');

            // Exibe o modal de edição
            $('#editColumnModal').modal('show');
        }

        // Configuração do formulário para enviar o dado de edição via AJAX
        $('#editColunaForm').on('submit', function (event) {
            event.preventDefault(); // Impede o envio padrão do formulário

            const colunaData = {
                nr_sequencia: $('#coluna_id_edit').val(),
                titulo_coluna: $('#titulo_coluna_edit').val(),
                atributo_coluna: $('#atributo_coluna_edit').val(),
                classe_coluna: $('#classe_coluna_edit').val(),
                tamanho_coluna: $('#tamanho_coluna_edit').val(),
                numero_apre_coluna: $('#numero_apre_coluna_edit').val(),
                escondido_coluna: $('#escondido_coluna_edit').is(':checked') ? 'H' : '', // Define 'H' se estiver marcado
                fonte_coluna: $('#edit_fonte_coluna').val(),
                cor_texto_coluna: $('#edit_cor_texto_coluna').val(),
                alinhamento_coluna: $('#edit_alinhamento_coluna').val(),
                font_bold: $('#edit_font_bold').is(':checked') ? 'Y' : 'N',
                font_italic: $('#edit_font_italic').is(':checked') ? 'Y' : 'N'
            };
            console.log('Dados enviados:', colunaData); // Para confirmar o que está sendo enviado

            // Envia os dados via AJAX
            $.ajax({
                url: '/edit_column',
                type: 'POST',
                data: JSON.stringify(colunaData), // Send as JSON
                contentType: 'application/json', // Set content type to JSON
                success: function (response) {
                    if (response.success) {
                        alert(response.message); // Exibe mensagem de sucesso
                        $('#editColumnModal').modal('hide'); // Fecha o modal
                        location.reload(); // Recarrega a página para atualizar a tabela
                    } else {
                        alert(response.message); // Exibe mensagem de erro
                    }
                },
                error: function () {
                    alert('Ocorreu um erro ao salvar a coluna.');
                }
            });
        });

        // Excluir coluna
        function excluirColuna(coluna_id) {

            // Mensagem de confirmação
            if (confirm('Tem certeza de que deseja excluir esta coluna?')) {
                // Realiza a requisição POST
                $.post('/excluir_coluna', { nr_sequencia: coluna_id })
                    .done(function (response) {
                        if (response.success) {
                            alert('Coluna excluída com sucesso!'); // Mensagem de sucesso
                            // Remove a linha da tabela
                            $('tr[data-coluna-id="' + coluna_id + '"]').remove();
                        } else {
                            alert('Erro ao excluir a coluna: ' + response.message);
                        }
                    })
                    .fail(function () {
                        alert('Erro ao fazer a requisição. Por favor, tente novamente.');
                    });
            }
        }

        // Duplicar coluna
        function duplicarColuna(coluna_id) {
            if (confirm('Tem certeza de que deseja duplicar esta coluna?')) {
                // Realiza a requisição POST para duplicar a coluna
                $.post('/duplicar_coluna', { nr_sequencia: coluna_id })
                    .done(function (response) {
                        if (response.success) {
                            alert('Coluna duplicada com sucesso!'); // Mensagem de sucesso
                            location.reload(); // Recarrega a página para mostrar a coluna duplicada
                        } else {
                            alert('Erro ao duplicar a coluna: ' + response.message);
                        }
                    })
                    .fail(function () {
                        alert('Erro ao fazer a requisição. Por favor, tente novamente.');
                    });
            }
        }

        /**************************************Fim coluna*********************************/


        /*********************************Inicio Legenda*****************************/
        // cadastrar legenda

        $(document).ready(function () {
            $('#saveLegendButton').on('click', function (event) {
                event.preventDefault();  // Previne o comportamento padrão de submissão do formulário

                // Captura os dados do formulário
                let titulo_legenda = $('#titulo_legenda').val();
                let cor_legenda = $('#cor_legenda').val();
                let numero_apre_legenda = $('#numero_apre_legenda').val();
                let painel_id = $('input[name="painel_id"]').val();

                // Verificar se os campos estão preenchidos
                if (!titulo_legenda || !cor_legenda || !numero_apre_legenda || !painel_id) {
                    alert('Por favor, preencha todos os campos obrigatórios.');
                    return;  // Para se os campos não estiverem preenchidos
                }

                let formData = {
                    descricao_legenda: titulo_legenda,  // Use o título como descrição
                    cor_legenda: cor_legenda,
                    numero_apre_legenda: numero_apre_legenda,
                    painel_id: painel_id
                };

                $.ajax({
                    url: '/cadastrar_legenda',
                    method: 'POST',
                    data: formData,
                    success: function (response) {
                        console.log('Resposta do servidor:', response);
                        if (response.success) {
                            alert('Legenda cadastrada com sucesso!');
                            location.reload();  // Recarrega a página para refletir as mudanças
                        } else {
                            alert('Erro: ' + response.error);
                        }
                    },
                    error: function (xhr, status, error) {
                        console.error('Erro na comunicação com o servidor:', xhr.status, xhr.statusText);
                        alert('Erro ao cadastrar a legenda.');
                    }
                });
            });
        });
        // Função para abrir o modal de edição com dados da legenda selecionada
        function abrirModalEditarLegenda(legendaId, tituloLegenda, corLegenda, numeroApreLegenda) {
            // Preencher os campos do modal com os dados da legenda
            $('#legenda_id_edit').val(legendaId);
            $('#titulo_legenda_edit').val(tituloLegenda);
            $('#cor_legenda_edit').val(corLegenda);
            $('#numero_apre_legenda_edit').val(numeroApreLegenda);

            // Abrir o modal de edição
            $('#editLegendModal').modal('show');
        }

        // duplicar legendas 
        function duplicarLegenda(legenda_id) {
            if (confirm('Tem certeza de que deseja duplicar esta legenda?')) {
                $.post('/duplicar_legenda', { legenda_id: legenda_id })
                    .done(function (response) {
                        if (response.success) {
                            alert('Legenda duplicada com sucesso!');
                            location.reload(); // Atualiza a página para mostrar a legenda duplicada
                        } else {
                            alert('Erro ao duplicar a legenda: ' + response.message);
                        }
                    })
                    .fail(function () {
                        alert('Erro ao fazer a requisição. Por favor, tente novamente.');
                    });
            }
        }

        // Função para excluir uma legenda
        function excluirLegenda(legendaId) {
            if (confirm("Tem certeza de que deseja excluir esta legenda?")) {
                $.ajax({
                    url: '/excluir_legenda/' + legendaId,
                    type: 'POST',
                    success: function (response) {
                        if (response.success) {
                            alert(response.message);
                            // Atualizar a lista de legendas ou recarregar a página para refletir a exclusão
                            location.reload(); // Recarrega a página para atualizar a lista
                        } else {
                            alert("Erro ao excluir a legenda: " + response.message);
                        }
                    },
                    error: function () {
                        alert("Erro ao tentar excluir a legenda.");
                    }
                });
            }
        }
        /*************************************Fim Legenda***********************************/

        /***********************************inicio regra************************************/
        // Função para abrir o modal para adicionar uma nova regra
        function abrirModalAdicionarRegra() {
            editandoRegra = false; // Define que estamos adicionando
            $('#regra_id').val(''); // Limpa o campo de ID
            $('#valor_regra').val(''); // Limpa o campo de valor
            $('#icone_regra').val(''); // Limpa o campo de ícone
            $('#classe_regra').val(''); // Limpa o campo de classe
            $('#substituicao_regra').val(''); // Limpa o campo de substituição
            $('#cor_regra').val('#000000'); // Reseta a cor
            $('#coluna_regra').val(''); // Limpa o campo de coluna
            $('#celula_linha_regra').val(''); // Limpa o campo de célula/linha
            $('#addRuleModal').modal('show'); // Mostra o modal
        }

        $(document).ready(function () {
            $('#saveRuleButton').on('click', function (event) {
                console.log('Botão clicado!');  // Para verificar se o evento está sendo acionado
                alert('Botão clicado!');  // Para garantir que o click está funcionando

                event.preventDefault();  // Previne o comportamento padrão de submissão do formulário

                // Captura os dados do formulário
                let valor_regra = $('#valor_regra').val();
                let icone_regra = $('#icone_regra').val();
                let classe_regra = $('#classe_regra').val();
                let substituicao_regra = $('#substituicao_regra').is(':checked') ? 'S' : 'N';
                let cor_regra = $('#cor_regra').val();
                let coluna_regra = $('#coluna_regra').val();
                let celula_linha_regra = $('#celula_linha_regra').val();
                let painel_id = $('input[name="painel_id"]').val();

                let formData = {
                    valor_regra: valor_regra,
                    icone_regra: icone_regra,
                    classe_regra: classe_regra,
                    substituicao_regra: substituicao_regra,
                    cor_regra: cor_regra,
                    coluna_regra: coluna_regra,
                    celula_linha_regra: celula_linha_regra,
                    painel_id: painel_id
                };

                $.ajax({
                    url: '/cadastrar_regra_cor',
                    method: 'POST',
                    contentType: 'application/json',  // Define o tipo de conteúdo como JSON
                    data: JSON.stringify(formData),    // Converte o formData para JSON
                    success: function (response) {
                        console.log('Resposta do servidor:', response);
                        if (response.success) {
                            alert('Regra cadastrada com sucesso!');
                            location.reload();
                        } else {
                            alert('Erro: ' + response.error);
                        }
                    },
                    error: function (xhr, status, error) {
                        console.error('Erro na comunicação com o servidor:', xhr.status, xhr.statusText);
                        alert('Erro ao cadastrar a regra.');
                    }
                });
            });
        });

        // Função para popular o select de colunas no modal de regras
        $(document).ready(function () {
            $('#addRuleModal').on('show.bs.modal', function (event) {
                var painelId = $('input[name="painel_id"]').val(); // Obtém o painel ID do formulário

                $.ajax({
                    url: '/listar_colunas_painel',
                    method: 'GET',
                    data: { painel_id: painelId },
                    success: function (response) {
                        var colunasSelect = $('#coluna_regra');
                        colunasSelect.empty(); // Limpa o select antes de adicionar os novos valores

                        // Popula o select com as colunas retornadas do servidor
                        $.each(response.colunas, function (index, coluna) {
                            colunasSelect.append(new Option(coluna.DS_TITULO_COLUNA, coluna.nr_sequencia));
                        });
                    },
                    error: function (error) {
                        console.error('Erro ao buscar colunas:', error);
                        alert('Erro ao carregar as colunas.');
                    }
                });
            });
        });

        // Função para popular o select de colunas no modal de edição de regras
        $(document).ready(function () {
            $('#editRuleModal').on('show.bs.modal', function (event) {
                var painelId = $('input[name="painel_id"]').val(); // Obtém o painel ID do formulário

                $.ajax({
                    url: '/listar_colunas_painel',
                    method: 'GET',
                    data: { painel_id: painelId },
                    success: function (response) {
                        var colunasSelect = $('#edit_coluna_regra');
                        colunasSelect.empty(); // Limpa o select antes de adicionar os novos valores

                        // Popula o select com as colunas retornadas do servidor
                        $.each(response.colunas, function (index, coluna) {
                            colunasSelect.append(new Option(coluna.DS_TITULO_COLUNA, coluna.nr_sequencia));
                        });
                    },
                    error: function (error) {
                        console.error('Erro ao buscar colunas:', error);
                        alert('Erro ao carregar as colunas.');
                    }
                });
            });
        });




        function abrirModalEditarRegra(regraId, valor, icone, classe, substituicao, cor, coluna, celulaLinha) {
            // Define os valores nos campos do modal de edição
            document.getElementById('edit_regra_id').value = regraId;
            document.getElementById('edit_valor_regra').value = valor;
            document.getElementById('edit_icone_regra').value = icone;
            document.getElementById('edit_classe_regra').value = classe;
            document.getElementById('edit_substituicao_regra').checked = substituicao === 'S';
            document.getElementById('edit_cor_regra').value = cor;
            document.getElementById('edit_coluna_regra').value = coluna;
            document.getElementById('edit_celula_linha_regra').value = celulaLinha;

            // Abre o modal de edição
            $('#editRuleModal').modal('show');
        }

        // Função para abrir o modal de edição e preencher os campos
        function editarRegra(regraId, valor, icone, classe, substituicao, cor, coluna, celulaLinha) {
            // Preencher os campos do formulário com os dados da regra selecionada
            document.getElementById('edit_regra_id').value = regraId;
            document.getElementById('edit_valor_regra').value = valor;
            document.getElementById('edit_icone_regra').value = icone;
            document.getElementById('edit_classe_regra').value = classe;
            document.getElementById('edit_substituicao_regra').checked = (substituicao === 'S');
            document.getElementById('edit_cor_regra').value = cor;
            document.getElementById('edit_coluna_regra').value = coluna;
            document.getElementById('edit_celulaLinha_regra').value = celulaLinha;


            // Abrir o modal
            $('#editRuleModal').modal('show');
        }

        // Configuração do envio de dados via AJAX
        $('#editRuleForm').on('submit', function (event) {
            event.preventDefault(); // Evita o envio padrão do formulário

            // Dados do formulário
            var formData = $(this).serialize();

            // Enviar dados via AJAX
            $.ajax({
                url: '/editar_regra', // Rota no servidor para processar a edição da regra
                type: 'POST',
                data: formData,
                success: function (response) {
                    // Fechar o modal
                    $('#editRuleModal').modal('hide');
                    // Atualizar a tabela de regras ou realizar outra ação de feedback
                    alert('Regra editada com sucesso!');
                    location.reload(); // Recarregar a página para atualizar as regras (opcional)
                },
                error: function (xhr, status, error) {
                    // Tratar erros, caso existam
                    console.error('Erro ao editar a regra:', error);
                    alert('Houve um erro ao editar a regra.');
                }
            });
        });
        //excluir regra
        function excluirRegra(regra_id) {
            // Mensagem de confirmação
            if (confirm('Tem certeza de que deseja excluir esta regra?')) {
                // Realiza a requisição POST
                $.post('/excluir_regra', { regra_id: regra_id })
                    .done(function (response) {
                        if (response.success) {
                            alert('Regra excluída com sucesso!'); // Mensagem de sucesso
                            // Remove a linha da tabela
                            $('tr[data-regra-id="' + regra_id + '"]').remove();
                        } else {
                            alert('Erro ao excluir a regra: ' + response.message);
                        }
                    })
                    .fail(function () {
                        alert('Erro ao fazer a requisição. Por favor, tente novamente.');
                    });
            }
        }

        // Duplicar regras

        function duplicarRegraCor(regra_id) {
            if (confirm('Tem certeza de que deseja duplicar esta regra de cor?')) {
                // Realiza a requisição POST para duplicar a regra de cor
                $.post('/duplicar_regra_cor', { regra_id: regra_id })
                    .done(function (response) {
                        if (response.success) {
                            alert('Regra de cor duplicada com sucesso!'); // Mensagem de sucesso
                            location.reload(); // Recarrega a página para mostrar a regra duplicada
                        } else {
                            alert('Erro ao duplicar a regra de cor: ' + response.message);
                        }
                    })
                    .fail(function () {
                        alert('Erro ao fazer a requisição. Por favor, tente novamente.');
                    });
            }
        }

        var regras = []; // Inicializa a variável regras no escopo global ou do módulo

        // Função para buscar regras do servidor
        function buscarRegras() {
            $.ajax({
                url: '/sua-url-para-buscar-regras',
                method: 'GET',
                success: function (data) {
                    regras = data.regras; // Assume que a resposta contém uma propriedade 'regras'
                    aplicarCores(); // Chama a função para aplicar cores após carregar as regras
                },
                error: function (xhr, status, error) {
                    console.error("Erro ao buscar regras:", error);
                }
            });
        }

        // Chame essa função para inicializar as regras
        buscarRegras();

        // Função para aplicar cores
        function aplicarCores() {
            $('#painelTableBody tr').each(function () {
                var rowIndex = $(this).index(); // Índice da linha atual
                $(this).find('td').each(function (index) {
                    var cellContent = $(this).text().trim(); // Obtém o conteúdo de texto da célula

                    // Procura a regra correspondente para a célula
                    var regra = regras.find(function (reg) {
                        return reg.ds_valor.trim().toLowerCase() === cellContent.toLowerCase();
                    });

                    // Se encontrar a regra, aplica a cor ou o ícone conforme as condições
                    if (regra) {
                        console.log(regra);
                        if (regra.ie_celula_linha === 'L' && regra.ds_cor) {
                            $(this).closest('tr').css('background-color', regra.ds_cor); // Aplica a cor ao fundo da linha
                        } else if (regra.ie_celula_linha === 'C' && regra.ds_cor) {
                            $(this).css('background-color', regra.ds_cor); // Aplica a cor ao fundo da célula
                        }
                        if (regra.ie_icon_replace === 'S' && regra.nm_icon) {
                            var iconHtml = `<img src="${regra.nm_icon}" alt="${cellContent} icon" />`;
                            $(this).html(iconHtml); // Substitui o conteúdo da célula pelo ícone
                        }
                    }
                });
            });
        }




        /*************************************fim  regra*********************************************/

        /**************************************Inicio Dashboard***************************************/


        // Função para salvar as alterações de Dashboard

        $(document).ready(function () {
            $('#saveDashboardButton').on('click', function (event) {
                return;
                console.log('Botão clicado!');  // Para verificar se o evento está sendo acionado
                alert('Botão clicado!');  // Para garantir que o click está funcionando
                event.preventDefault();  // Previne o comportamento padrão de submissão do formulário

                let formData = {

                    dashboard_id: $('#dashboard_id').val(),
                    titulo_dashboard: $('#titulo_dashboard').val(),
                    sql_dashboard: $('#sql_dashboard').val(),
                    cor_dashboard: $('#cor_dashboard').val(),
                    painel_id: $('input[name="painel_id"]').val(),
                    fonte_dashboard: $('#fonte_dashboard').val(),
                    cor_texto_dashboard: $('#ds_cor_texto').val(),
                    alinhamento_dashboard: $('#ds_alinhamento').val(),
                    font_bold_dashboard: $('#font_bold').is(':checked') ? 'Y' : 'N',
                    font_italic_dashboard: $('#font_italic').is(':checked') ? 'Y' : 'N'
                };

                // Defina a URL de acordo com o modo de edição ou adição
                let url = formData.dashboard_id ? '/edit_dashboard' : '/cadastrar_dashboard';

                $.ajax({
                    url: url,
                    method: 'POST',
                    data: formData,
                    success: function (response) {
                        if (response.success) {
                            alert('Dashboard salvo com sucesso!');
                            location.reload();  // Recarrega a página para refletir as mudanças
                        } else {
                            alert('Erro: ' + response.error);
                        }
                    },
                    error: function (error) {
                        console.error('Erro na comunicação com o servidor:', error);
                        alert('Erro ao salvar o dashboard.');
                    }
                });
            });
        });


        // Função para abrir o modal de edição de dashboard com dados preenchidos
        function abrirModalEditarDashboard(id, titulo, sql, cor,  fonte, corTexto, alinhamento, fontBold, fontItalic) {

            // Preenche os campos do modal com os valores passados
            $('#dashboard_id_edit').val(id); // Aqui será o ID do dashboard
            $('#titulo_dashboard_edit').val(titulo); // Título do dashboard
            $('#sql_dashboard_edit').val(sql); // SQL do dashboard
            $('#cor_dashboard_edit').val(cor); // Cor do dashboard
            $('#fonte_dashboard_edit').val(fonte);
            $('#ds_cor_texto_edit').val(corTexto);
            $('#ds_alinhamento_edit').val(alinhamento);
            $('#font_bold_edit').prop('checked', fontBold === 'Y');
            $('#font_italic_edit').prop('checked', fontItalic === 'Y');
            // Exibe o modal de edição
            $('#editDashboardModal').modal('show');
        }

        // Configuração do formulário para enviar os dados de edição via AJAX
        $('#editDashboardForm').on('submit', function (event) {
            return;
            event.preventDefault(); // Impede o envio padrão do formulário

            const dashboardData = {
                nr_sequencia: $('#dashboard_id_edit').val(),  // ID do dashboard
                titulo_dashboard: $('#titulo_dashboard_edit').val(),
                sql_dashboard: $('#sql_dashboard_edit').val(),
                cor_dashboard: $('#cor_dashboard_edit').val(),
                fonte_dashboard: $('#fonte_dashboard_edit').val(),
                cor_texto_dashboard: $('#ds_cor_texto_edit').val(),
                alinhamento_dashboard: $('#ds_alinhamento_edit').val(),
                font_bold_dashboard: $('#font_bold_edit').is(':checked') ? 'Y' : 'N',
                font_italic_dashboard: $('#font_italic_edit').is(':checked') ? 'Y' : 'N'
            };
            console.log('Dados enviados:', dashboardData); // Para confirmar o que está sendo enviado

            // Envia os dados via AJAX
            $.ajax({
                url: '/editar_dashboard',
                type: 'POST',
                contentType: 'application/json', // Define o tipo de conteúdo como JSON
                data: JSON.stringify(dashboardData), // Converte os dados para JSON
                success: function (response) {
                    if (response.success) {
                        alert(response.message); // Exibe mensagem de sucesso
                        $('#editDashboardModal').modal('hide'); // Fecha o modal
                        location.reload(); // Recarrega a página para atualizar a tabela
                    } else {
                        alert(response.message); // Exibe mensagem de erro
                    }
                },
                error: function () {
                    alert('Ocorreu um erro ao salvar o dashboard.');
                }
            });
        });



        function excluirDashboard(dashboardId) {
            // Confirmar exclusão com o usuário
            if (confirm("Tem certeza que deseja excluir este dashboard?")) {
                // Enviar requisição AJAX para o servidor
                console.log("dash id: " + dashboardId)
                $.ajax({
                    url: `/excluir_dashboard/${dashboardId}`,  // URL para excluir o dashboard
                    type: 'POST',
                    success: function (response) {
                        // Se a resposta for bem-sucedida, removemos a linha do dashboard da tabela
                        console.log("Dashboard excluído com sucesso", response);
                        alert('Dashboard excluído com sucesso!');

                        // Remover a linha do dashboard da tabela
                        $(`#dashboard-row-${dashboardId}`).remove();  // Remove a linha da tabela com o ID do dashboard
                    },
                    error: function (xhr, status, error) {
                        // Caso ocorra um erro na requisição
                        console.error("Erro ao excluir o dashboard:", error);
                        alert('Erro ao excluir o dashboard. Tente novamente.');
                    }
                });
            }
        }

        /************************************Fim Dashboard*********************************/

        // Função para abrir o modal de adicionar grafico

        $(document).ready(function () {
            $('#addGraficoForm').on('submit', function (event) {
                event.preventDefault();

                let formData = {
                    titulo_grafico: $('#titulo_grafico').val(),
                    sql_grafico: $('#sql_grafico').val(),
                    numero_apre_grafico: $('#numero_apre_grafico').val(),
                    tipo_grafico: $('#tipo_grafico').val(),
                    painel_id: $('input[name="painel_id"]').val()
                };

                $.ajax({
                    url: '/cadastrar_grafico',
                    method: 'POST',
                    data: formData,
                    success: function (response) {
                        if (response.success) {
                            alert('Gráfico cadastrado com sucesso!');
                            location.reload();
                        } else {
                            alert('Erro: ' + response.error);
                        }
                    },
                    error: function (error) {
                        console.error('Erro na comunicação com o servidor:', error);
                        alert('Erro ao cadastrar o gráfico.');
                    }
                });
            });
        });
        // Função para abrir o modal de edição de Gráfico com dados preenchidos
        function abrirModalEditarGrafico(id, titulo, sql, numeroApre, tipo) {
            // Preenche os campos do modal com os valores passados
            $('#grafico_id_edit').val(id); // Aqui será o ID do grafico
            $('#titulo_grafico_edit').val(titulo); // Título do grafico
            $('#sql_grafico_edit').val(sql); // SQL do grafico
            $('#numero_apre_grafico_edit').val(numeroApre); // Numero de apresentação do grafico
            $('#tipo_grafico_edit').val(tipo) // tipo de grafico

            // Exibe o modal de edição
            $('#editGraficoModal').modal('show');
        }
        // Configuração do formulário para enviar os dados de edição via AJAX
        $('#editGraficoForm').on('submit', function (event) {
            event.preventDefault(); // Impede o envio padrão do formulário

            const graficoData = {
                nr_sequencia: $('#grafico_id_edit').val(),  // ID do grafico
                titulo_grafico: $('#titulo_grafico_edit').val(),
                sql_grafico: $('#sql_grafico_edit').val(),
                numero_apre_grafico: $('#numero_apre_grafico_edit').val(),
                tipo_grafico: $('#tipo_grafico_edit').val()
            };
            console.log('Dados enviados:', graficoData); // Para confirmar o que está sendo enviado

            // Envia os dados via AJAX
            $.ajax({
                url: '/editar_grafico',
                type: 'POST',
                data: graficoData,
                success: function (response) {
                    if (response.success) {
                        alert(response.message); // Exibe mensagem de sucesso
                        $('#editGraficoModal').modal('hide'); // Fecha o modal
                        location.reload(); // Recarrega a página para atualizar a tabela
                    } else {
                        alert(response.message); // Exibe mensagem de erro
                    }
                },
                error: function () {
                    alert('Ocorreu um erro ao salvar o grafico.');
                }
            });
        });

        // duplicar grafico
        function duplicarGrafico(grafico_id) {
            if (confirm('Tem certeza de que deseja duplicar este grafico?')) {
                $.post('/duplicar_grafico', { grafico_id: grafico_id })
                    .done(function (response) {
                        if (response.success) {
                            alert('Grafico duplicado com sucesso!');
                            location.reload(); // Atualiza a página para mostrar o grafico duplicado
                        } else {
                            alert('Erro ao duplicar o grafico: ' + response.message);
                        }
                    })
                    .fail(function () {
                        alert('Erro ao fazer a requisição. Por favor, tente novamente.');
                    });
            }
        }
        //excluir grafico
        function excluirGrafico(graficoId) {
            // Confirmar exclusão com o usuário
            if (confirm("Tem certeza que deseja excluir este grafico?")) {
                // Enviar requisição AJAX para o servidor
                console.log("grafico id: " + graficoId)
                $.ajax({
                    url: `/excluir_grafico/${graficoId}`,  // URL para excluir o grafico
                    type: 'POST',
                    success: function (response) {
                        // Se a resposta for bem-sucedida, removemos a linha do grafico da tabela
                        console.log("Grafico excluído com sucesso", response);
                        alert('Grafico excluído com sucesso!');

                        // Remover a linha do grafico da tabela
                        $(`#grafico-row-${graficoId}`).remove();  // Remove a linha da tabela com o ID do grafico
                    },
                    error: function (xhr, status, error) {
                        // Caso ocorra um erro na requisição
                        console.error("Erro ao excluir o grafico:", error);
                        alert('Erro ao excluir o grafico. Tente novamente.');
                    }
                });
            }
        }
        /************************************Fim Gráfico*********************************/

    </script>
</head>

<body class="bg-light">
    <div class="logo">
        <!-- Logotipo do aplicativo -->
        <img id="logoImg" src="{{ url_for('static', filename='imagens/logo.png') }}" alt="Logotipo"
            style="max-height: 60px;">
    </div>
    <div class="container">

        <h2 class="mt-5">Editar Painel</h2>
        <div class="text-right" style="margin: 1rem;">
            <button id="themeToggle" class="btn btn-secondary">
                <i class="fas fa-sun" id="themeIcon"></i> <!-- Ícone de sol inicial -->
            </button>

        </div>
        <form id="panelForm" method="POST" action="/editar_painel/{{ painel_id }}">
            <input type="hidden" name="painel_id" value="{{ painel_id }}">

            <div class="form-group">
                <label for=" ds_titulo_painel">Título</label>
                <input type="text" class="form-control" id="ds_titulo_painel" name="ds_titulo_painel"
                    value="{{ painel[0] }}" required>
            </div>

            <div class="form-group">
                <label for="ds_observacao">Descrição</label>
                <input type="text" class="form-control" id="ds_observacao" name="ds_observacao" value="{{ painel[1] }}"
                    required>
            </div>

            <div class="form-group">
                <label for="ds_sql">SQL Query</label>
                <textarea class="form-control" id="ds_sql" name="ds_sql" required>{{ painel[4] }}</textarea>
            </div>
            <!-- Novo campo para SQL do filtro -->
            <div class="form-group">
                <label for="sql_filtro">SQL do Filtro</label>
                <textarea class="form-control" id="sql_filtro" name="sql_filtro"></textarea>
            </div>
            <!-- Novo campo para tipo de filtro -->
            <div class="form-group">
                <label for="tipo_filtro">Tipo de Filtro</label>
                <select class="form-control" id="tipo_filtro" name="tipo_filtro">
                    <option value="">Selecione</option>
                    <option value="unico">Único</option>
                    <option value="multiselecao">Multiseleção</option>
                </select>
            </div>

            <div class="d-flex justify-content-between" style="padding: 10px 5px;">
                <div>
                    <label for="qt_segundos_atualizacao">Seg/Atualização</label>
                    <input type="number" class="form-control" id="qt_segundos_atualizacao"
                        name="qt_segundos_atualizacao" value="{{ painel[3] }}" required style="width: 80px;">
                </div>
                <div>
                    <label for="qt_segundos_rolagem">Seg/Rolagem</label>
                    <input type="number" class="form-control" id="qt_segundos_rolagem" name="qt_segundos_rolagem"
                        value="{{ painel[2] }}" required style="width: 80px;">
                </div>
            </div>

            <div class="d-flex justify-content-between mt-3">
                <a href="/paineis" class="btn btn-secondary">Voltar</a>
                <button type="submit" class="btn btn-primary">Salvar</button>
            </div>
        </form>


        <!-- Seção de Configurações Adicionais -->
        <div id="camposAdicionais" class="mt-5">
            <h3>Configurações Adicionais</h3>
            <div class="row">
                <!-- Colunas -->
                <div class="col-md-6">
                    <h4>Colunas</h4>
                    <table class="table table-bordered">
                        <thead>
                            <tr>
                                <th>Título</th>
                                <th>Atributo</th>
                                <th>Classe</th>
                                <th>Tamanho</th>
                                <th>Nº apre.</th>
                                <th>Escondido</th>
                                
                                <th>Ações</th>
                            </tr>
                        </thead>
                        <button class="btn btn-info" id="novaColunaBtn" data-toggle="modal"
                            data-target="#addColumnModal"
                            style="margin-left: 76%;  background: linear-gradient(45deg, #0a2f57, #00c6ff);">+ Nova
                            Coluna</button>
                        <tbody id="colunas">
                            {% for coluna in colunas %}
                            <tr data-coluna-id="{{ coluna[0] }}">

                                <td>{{ coluna[1] }}</td>
                                <td>{{ coluna[2] }}</td>
                                <td>{{ coluna[3] }}</td>
                                <td>{{ coluna[4] }}</td>
                                <td>{{ coluna[5] }}</td>
                                <td>{{ coluna[6] }}</td>
                                
                                
                                <td>
                                    <button class="btn btn-sm btn-outline-none"
                                        onclick="abrirModalEditarColuna('{{ coluna[0] }}', '{{ coluna[1] }}', '{{ coluna[2] }}', '{{ coluna[3] }}', '{{ coluna[4] }}',  '{{ coluna[5] }}','{{ coluna[6] }}', '{{ coluna[7] }}', '{{ coluna[8] }}', '{{ coluna[9] }}', '{{ coluna[10] }}', '{{ coluna[11] }}')">
                                        <i class="fas fa-pencil-alt" style="color: rgb(1, 145, 212)"
                                            title="Editar Coluna"></i>
                                    </button>

                                    <button class="btn btn-sm btn-outline-none" title="Excluir"
                                        onclick="excluirColuna('{{ coluna[0] }}');">
                                        <i class="fas fa-trash-alt" style="color: rgb(187, 1, 1)"></i>
                                    </button>

                                    <button class="btn btn-sm btn-outline-none"
                                        onclick="duplicarColuna('{{ coluna[0] }}')">
                                        <i class="fas fa-copy" style="color: rgb(156, 212, 1)"
                                            title="Duplicar Coluna"></i>
                                    </button>
                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
                <!-- Dashboards -->
                <div class="col-md-6">
                    <h4 class="mt-4">Dashboards</h4>
                    <table class="table table-bordered">
                        <thead>
                            <tr>
                                <th>Título</th>
                                <th>SQL</th>
                                <th>Cor</th>
                                <th>Ações</th>
                            </tr>
                        </thead>
                        <button class="btn btn-info" id="novoDashboardBtn" data-toggle="modal"
                            data-target="#addDashboardModal"
                            style="margin-left: 73.5%;  background: linear-gradient(45deg, #0a2f57, #00c6ff);">
                            + Novo Dashboard
                        </button>
                        <tbody>
                            {% for dashboard in dashboards %}
                            <tr id="dashboard-row-{{ dashboard[0] }}">
                                <td>{{ dashboard[1] }}</td>
                                <td>{{ dashboard[2] }}</td>
                                <td><span
                                        style="background-color: {{ dashboard[3] }}; display: block; width: 100%; height: 20px;"></span>
                                </td>
                                <td>
                                    <button class="btn btn-sm btn-outline-none"
                                    onclick="abrirModalEditarDashboard('{{ dashboard[0] | e }}', '{{ dashboard[1] | e }}', '{{ dashboard[2] | e }}', '{{ dashboard[3] | e }}', '{{ dashboard[8] | e }}', '{{ dashboard[9] | e }}', '{{ dashboard[10] | e }}', '{{ dashboard[11] | e }}', '{{ dashboard[12] | e }}')">

                                        <i class="fas fa-pencil-alt" style="color: rgb(1, 145, 212)"
                                            title="Editar Dashboard"></i>
                                    </button>
                                    <button class="btn btn-sm btn-outline-none"
                                        onclick="excluirDashboard('{{ dashboard[0] }}')">
                                        <i class="fas fa-trash-alt" style="color: rgb(187, 1, 1)"
                                            title="Excluir Dashboard"></i>
                                    </button>
                                    <button class="btn btn-sm btn-outline-none"
                                        onclick="duplicarDashboard('{{ dashboard[0] }}')">
                                        <i class="fas fa-copy" style="color: rgb(156, 212, 1)"
                                            title="Duplicar Dashboard"></i>
                                    </button>
                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="row">
                <!-- Legendas -->
                <div class="col-md-6">
                    <h4 class="mt-4">Legendas</h4>
                    <table class="table table-bordered">
                        <thead>
                            <tr>
                                <th>Título</th>
                                <th>Cor</th>
                                <th>Nº apre</th>
                                <th>Ações</th>
                            </tr>
                        </thead>
                        <button class="btn btn-info" id="novaLegendaBtn" data-toggle="modal"
                            data-target="#addLegendModal"
                            style="margin-left: 75%;  background: linear-gradient(45deg, #0a2f57, #00c6ff);">+ Nova
                            Legenda</button>
                        <tbody>
                            {% for legenda in legendas %}
                            <tr>
                                <td>{{ legenda[1] }}</td>
                                <td><span
                                        style="background-color: {{ legenda[2] }}; display: block; width: 100%; height: 20px;"></span>
                                </td>
                                <td>
                                    <span>
                                        {{ legenda[3] }}
                                    </span>
                                </td>
                                <td>
                                    <button class="btn btn-sm btn-outline-none"
                                        onclick="abrirModalEditarLegenda('{{ legenda[0] }}', '{{ legenda[1] }}', '{{ legenda[2] }}', '{{ legenda[3] }}')">
                                        <i class="fas fa-pencil-alt" style="color: rgb(1, 145, 212)"></i>
                                    </button>
                                    <button class="btn btn-sm btn-outline-none"
                                        onclick="excluirLegenda('{{ legenda[0] }}')">
                                        <i class="fas fa-trash-alt" style="color: rgb(187, 1, 1)"></i>
                                    </button>

                                    <button class="btn btn-sm btn-outline-none"
                                        onclick="duplicarLegenda('{{ legenda[0] }}')">
                                        <i class="fas fa-copy" style="color: rgb(156, 212, 1)"></i>
                                    </button>
                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
                <!-- Regras -->
                <div class="col-md-6">
                    <h4 class="mt-4">Regras</h4>
                    <table class="table table-bordered">
                        <thead>
                            <tr>
                                <th>Valor</th>
                                <th>Ícone</th>
                                <th>Classe</th>
                                <th>Substituição</th>
                                <th>Cor</th>
                                <th>Coluna</th>
                                <th>Cel/lin</th>
                                <th>Ações</th>
                            </tr>
                        </thead>
                        <button class="btn btn-info" id="novaRegraBtn" data-toggle="modal" data-target="#addRuleModal"
                            style="margin-left: 75%;  background: linear-gradient(45deg, #0a2f57, #00c6ff);">+ Nova
                            Regra</button>
                        <tbody id="regras">
                            {% for regra in regras %}
                            <tr data-regra-id="{{ regra[0] }}">
                                <td>{{ regra[1] }}</td>
                                <td><i class="{{ regra[4] }}"></i></td>
                                <td>{{ regra[6] }}</td>
                                <td>{{ regra[3] }}</td>
                                <td><span
                                        style="background-color: {{ regra[2] }}; display: block; width: 100%; height: 20px;"></span>
                                </td>
                                <td>{{ regra[11] }}</td>
                                <td>{{ regra[5] }}</td>
                                <td>
                                    <button class="btn btn-sm btn-outline-none"
                                        onclick="abrirModalEditarRegra('{{ regra[0] }}', '{{ regra[1] }}', '{{ regra[4] }}', '{{ regra[6] }}', '{{ regra[3] }}', '{{ regra[2] }}', '{{ regra[11] }}', '{{ regra[5] }}')">
                                        <i class="fas fa-pencil-alt" style="color: rgb(1, 145, 212)"></i>
                                    </button>
                                    <button class="btn btn-sm btn-outline-none"
                                        onclick="excluirRegra('{{ regra[0] }}')">
                                        <i class="fas fa-trash-alt" style="color: rgb(187, 1, 1)"></i>
                                    </button>
                                    <button class="btn btn-sm btn-outline-none"
                                        onclick="duplicarRegraCor('{{ regra[0] }}')">
                                        <i class="fas fa-copy" style="color: rgb(156, 212, 1)"></i>
                                    </button>
                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="row">
                <!-- Gráficos -->
                <div class="col-md-12">
                    <h4 class="mt-4">Gráficos</h4>
                    <table class="table table-bordered">
                        <thead>
                            <tr>
                                <th>Título</th>
                                <th>SQL</th>
                                <th>Nº Apresentação</th>
                                <th>Tipo</th>
                                <th>Ações</th>
                            </tr>
                        </thead>
                        <button class="btn btn-info" id="novoGraficoBtn" data-toggle="modal"
                            data-target="#addGraficoModal"
                            style="margin-left: 73.5%;  background: linear-gradient(45deg, #0a2f57, #00c6ff);">
                            + Novo Gráfico
                        </button>
                        <tbody>
                            {% for grafico in graficos %}
                            <tr id="grafico-row-{{ grafico[0] }}">
                                <td>{{ grafico[1] }}</td>
                                <td>{{ grafico[2] }}</td>
                                <td>{{ grafico[3] }}</td>
                                <td>{{ grafico[4] }}</td>
                                <td>
                                    <button class="btn btn-sm btn-outline-none"
                                        onclick="abrirModalEditarGrafico('{{ grafico[0] | e }}', '{{ grafico[1] | e }}', '{{ grafico[2] | e }}', '{{ grafico[3] | e }}', '{{ grafico[4] | e }}')">
                                        <i class="fas fa-pencil-alt" style="color: rgb(1, 145, 212)"
                                            title="Editar Gráfico"></i>
                                    </button>
                                    <button class="btn btn-sm btn-outline-none"
                                        onclick="excluirGrafico('{{ grafico[0] }}')">
                                        <i class="fas fa-trash-alt" style="color: rgb(187, 1, 1)"
                                            title="Excluir Gráfico"></i>
                                    </button>
                                    <button class="btn btn-sm btn-outline-none"
                                        onclick="duplicarGrafico('{{ grafico[0] }}')">
                                        <i class="fas fa-copy" style="color: rgb(156, 212, 1)"
                                            title="Duplicar Gráfico"></i>
                                    </button>
                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
    <!----------------------------------- Modais para Adicionar Itens ------------------------------------>
    <!-- Modal para adicionar coluna -->
    <div class="modal fade" id="addColumnModal" tabindex="-1" role="dialog" aria-labelledby="addColumnModalLabel"
        aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="addColumnModalLabel">Adicionar</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Fechar">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <form id="adicionarColunaForm" action="/adicionar_coluna/{{ painel_id }}" method="POST">
                    <div class="modal-body">
                        <input type="hidden" id="coluna_id" name="nr_sequencia">
                        <!-- Campo oculto para o ID da coluna -->

                        <div class="form-group">
                            <label for="titulo_coluna">Título da Coluna</label>
                            <input type="text" class="form-control" id="titulo_coluna" name="titulo_coluna" required>
                        </div>
                        <div class="form-group">
                            <label for="atributo_coluna">Atributo da Coluna</label>
                            <input type="text" class="form-control" id="atributo_coluna" name="atributo_coluna"
                                required>
                        </div>
                        <div class="form-group">
                            <label for="classe_coluna">Classe da Coluna</label>
                            <input type="text" class="form-control" id="classe_coluna" name="classe_coluna">
                        </div>
                        <div class="form-group">
                            <label for="tamanho_coluna">Tamanho da Coluna</label>
                            <input type="number" class="form-control" id="tamanho_coluna" name="tamanho_coluna"
                                required>
                        </div>
                        <div class="form-group">
                            <label for="numero_apre_coluna">Número de Apresentação</label>
                            <input type="number" class="form-control" id="numero_apre_coluna" name="numero_apre_coluna"
                                required>
                        </div>
                        <div class="form-check">
                            <input type="checkbox" class="form-check-input" id="escondido_coluna"
                                name="escondido_coluna">
                            <label class="form-check-label" for="escondido_coluna">Escondido</label>
                        </div>
                        <div class="form-group">
                            <label for="fonte_coluna">Tamanho da Fonte</label>
                            <input type="number" class="form-control" id="fonte_coluna" name="fonte_coluna" min="10"
                                max="50" value="14">
                        </div>
                        <div class="form-group">
                            <label for="cor_texto_coluna">Cor do Texto</label>
                            <input type="color" class="form-control" id="cor_texto_coluna" name="cor_texto_coluna"
                                value="#000000">
                        </div>
                        <div class="form-group">
                            <label for="alinhamento_coluna">Alinhamento do Texto</label>
                            <select class="form-control" id="alinhamento_coluna" name="alinhamento_coluna">
                                <option value="left">Esquerda</option>
                                <option value="center">Centro</option>
                                <option value="right">Direita</option>
                                <option value="justify">Justificado</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="font_bold">Negrito</label>
                            <input type="checkbox" id="font_bold" name="font_bold" value="Y">
                        </div>
                        <div class="form-group">
                            <label for="font_italic">Itálico</label>
                            <input type="checkbox" id="font_italic" name="font_italic" value="Y">
                        </div>

                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancelar</button>
                        <button type="submit" class="btn btn-primary">Salvar</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <!----------------------------------- Modal para editar coluna---------------------------------------->
    <div class="modal fade" id="editColumnModal" tabindex="-1" role="dialog" aria-labelledby="editColumnModalLabel"
        aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="editColumnModalLabel">Editar Coluna</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Fechar">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <form id="editarColunaForm" action="/edit_column" method="POST">
                    <div class="modal-body">
                        <input type="hidden" id="coluna_id_edit" name="nr_sequencia">
                        <div class="form-group">
                            <label for="titulo_coluna_edit">Título da Coluna</label>
                            <input type="text" class="form-control" id="titulo_coluna_edit" name="titulo_coluna"
                                required>
                        </div>
                        <div class="form-group">
                            <label for="atributo_coluna_edit">Atributo da Coluna</label>
                            <input type="text" class="form-control" id="atributo_coluna_edit" name="atributo_coluna"
                                required>
                        </div>
                        <div class="form-group">
                            <label for="classe_coluna">Classe da Coluna</label>
                            <input type="text" class="form-control" id="classe_coluna_edit" name="classe_coluna">
                        </div>
                        <div class="form-group">
                            <label for="tamanho_coluna">Tamanho da Coluna</label>
                            <input type="number" class="form-control" id="tamanho_coluna_edit" name="tamanho_coluna"
                                required>
                        </div>
                        <div class="form-group">
                            <label for="numero_apre_coluna">Número de Apresentação</label>
                            <input type="number" class="form-control" id="numero_apre_coluna_edit"
                                name="numero_apre_coluna" required>
                        </div>
                        <div class="form-check">
                            <input type="checkbox" class="form-check-input" id="escondido_coluna_edit"
                                name="escondido_coluna">
                            <label class="form-check-label" for="escondido_coluna">Escondido</label>
                        </div>
                        <div class="form-group">
                            <label for="edit_fonte_coluna">Tamanho da Fonte</label>
                            <input type="number" class="form-control" id="edit_fonte_coluna" name="fonte_coluna" min="10"
                                max="50" value="14">
                        </div>
                        <div class="form-group">
                            <label for="edit_cor_texto_coluna">Cor do Texto</label>
                            <input type="color" class="form-control" id="edit_cor_texto_coluna" name="cor_texto_coluna"
                                value="#000000">
                        </div>
                        <div class="form-group">
                            <label for="edit_alinhamento_coluna">Alinhamento do Texto</label>
                            <select class="form-control" id="edit_alinhamento_coluna" name="alinhamento_coluna">
                                <option value="left">Esquerda</option>
                                <option value="center">Centro</option>
                                <option value="right">Direita</option>
                                <option value="justify">Justificado</option>
                            </select>
                        </div>
                        <!-- Bold -->
                        <div class="form-group">
                            <label for="edit_font_bold">Negrito</label>
                            <input type="checkbox" id="edit_font_bold" name="font_bold" value="Y">
                        </div>
                        <!-- Italic -->
                        <div class="form-group">
                            <label for="edit_font_italic">Itálico</label>
                            <input type="checkbox" id="edit_font_italic" name="font_italic" value="Y">
                        </div>
                    </div>

                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancelar</button>
                        <button type="submit" class="btn btn-primary">Salvar Alterações</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!---------------------------------------- Modal para adicionar dashboard---------------------------------------->
    <div class="modal fade" id="addDashboardModal" tabindex="-1" role="dialog" aria-labelledby="addDashboardModalLabel"
        aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="addDashboardModalLabel">Adicionar/Editar Dashboard</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Fechar">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <form id="addDashboardForm" action="/editar_dashboard" method="POST">
                        <input type="hidden" id="dashboard_id" name="dashboard_id">
                        <!-- Campo oculto para o ID do dashboard -->
                        <input type="hidden" name="painel_id" value="{{ painel_id }}">
                        <div class="form-group">
                            <label for="titulo_dashboard">Título</label>
                            <input type="text" class="form-control" id="titulo_dashboard" name="titulo_dashboard"
                                required>
                        </div>
                        <div class="form-group">
                            <label for="sql_dashboard">SQL</label>
                            <textarea class="form-control" id="sql_dashboard" name="sql_dashboard" required></textarea>
                        </div>
                        <div class="form-group">
                            <label for="cor_dashboard">Cor</label>
                            <input type="color" id="cor_dashboard" name="cor_dashboard" value="#000000">
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancelar</button>
                            <button type="button" class="btn btn-primary" id="saveDashboardButton">Salvar</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>


    <!-----------------------------------------------Modal para editar dashboard---------------------------------->

    <div class="modal fade" id="editDashboardModal" tabindex="-1" role="dialog"
        aria-labelledby="editDashboardModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="editDashboardModalLabel">Editar Dashboard</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Fechar">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <form id="editDashboardForm" action="/editar_dashboard" method="POST">
                    <div class="modal-body">
                        <input type="hidden" id="dashboard_id_edit" name="nr_sequencia">
                        <div class="form-group">
                            <label for="titulo_dashboard_edit">Título do Dashboard</label>
                            <input type="text" class="form-control" id="titulo_dashboard_edit" name="titulo_dashboard"
                                required>
                        </div>
                        <div class="form-group">
                            <label for="sql_dashboard_edit">Sql do Dashboard</label>
                            <input type="form-control" class="form-control" id="sql_dashboard_edit" name="sql_dashboard"
                                required>
                        </div>
                        <div class="form-group">
                            <label for="cor_dashboard">Cor do Dashboard</label>
                            <input type="color" class="form-control" id="cor_dashboard_edit" name="cor_dashboard">
                        </div>
                        <div class="form-group">
                            <label for="fonte_dashboard">Tamanho da Fonte</label>
                            <input type="number" class="form-control" id="fonte_dashboard" name="fonte_dashboard" min="10" max="50" value="14">
                        </div>
                        <div class="form-group">
                            <label for="ds_cor_texto">Cor do Texto</label>
                            <input type="color" class="form-control" id="ds_cor_texto" name="ds_cor_texto" value="#000000">
                        </div>
                        <div class="form-group">
                            <label for="ds_alinhamento">Alinhamento do Texto</label>
                            <select class="form-control" id="ds_alinhamento" name="ds_alinhamento">
                                <option value="left">Esquerda</option>
                                <option value="center" selected>Centro</option>
                                <option value="right">Direita</option>
                                <option value="justify">Justificado</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="font_bold">Negrito</label>
                            <input type="checkbox" id="font_bold" name="font_bold" value="Y">
                        </div>
                        <div class="form-group">
                            <label for="font_italic">Itálico</label>
                            <input type="checkbox" id="font_italic" name="font_italic" value="Y">
                        </div>
                        
                        <!-- Inside editDashboardModal -->
                        <div class="form-group">
                            <label for="fonte_dashboard_edit">Tamanho da Fonte</label>
                            <input type="number" class="form-control" id="fonte_dashboard_edit" name="fonte_dashboard" min="10" max="50" value="14">
                        </div>
                        <div class="form-group">
                            <label for="ds_cor_texto_edit">Cor do Texto</label>
                            <input type="color" class="form-control" id="ds_cor_texto_edit" name="ds_cor_texto" value="#000000">
                        </div>
                        <div class="form-group">
                            <label for="ds_alinhamento_edit">Alinhamento do Texto</label>
                            <select class="form-control" id="ds_alinhamento_edit" name="ds_alinhamento">
                                <option value="left">Esquerda</option>
                                <option value="center" selected>Centro</option>
                                <option value="right">Direita</option>
                                <option value="justify">Justificado</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="font_bold_edit">Negrito</label>
                            <input type="checkbox" id="font_bold_edit" name="font_bold" value="Y">
                        </div>
                        <div class="form-group">
                            <label for="font_italic_edit">Itálico</label>
                            <input type="checkbox" id="font_italic_edit" name="font_italic" value="Y">
                        </div>

                    </div>

                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancelar</button>
                        <button type="submit" class="btn btn-primary">Salvar Alterações</button>
                    </div>
                </form>
            </div>
        </div>
    </div>


    <!-- Modal para adicionar legenda -->
    <div class="modal fade" id="addLegendModal" tabindex="-1" role="dialog" aria-labelledby="addLegendModalLabel"
        aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="addLegendModalLabel">Adicionar/Editar Legenda</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Fechar">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <form id="addLegendForm" method="POST">
                        <input type="hidden" id="legenda_id" name="legenda_id">
                        <!-- Campo oculto para o ID da legenda -->
                        <input type="hidden" name="painel_id" value="{{ painel_id }}">
                        <div class="form-group">
                            <label for="titulo_legenda">Título</label>
                            <input type="text" class="form-control" id="titulo_legenda" name="titulo_legenda" required>
                        </div>
                        <div class="form-group">
                            <label for="cor_legenda">Cor</label>
                            <input type="color" id="cor_legenda" name="cor_legenda" value="#000000">
                        </div>
                        <div class="form-group">
                            <label for="numero_apre_legenda">Nº apre.</label>
                            <input type="number" class="form-control" id="numero_apre_legenda"
                                name="numero_apre_legenda" required>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancelar</button>
                            <button type="button" class="btn btn-primary" id="saveLegendButton">Salvar</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <!-- Modal para editar legenda -->
    <div class="modal fade" id="editLegendModal" tabindex="-1" role="dialog" aria-labelledby="editLegendModalLabel"
        aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="editLegendModalLabel">Editar Legenda</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Fechar">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <form id="editLegendForm" action="/editar_legenda" method="POST">
                    <div class="modal-body">
                        <!-- Campo oculto para o ID da legenda -->
                        <input type="hidden" id="legenda_id_edit" name="legenda_id">
                        <input type="hidden" name="painel_id" value="{{ painel_id }}">

                        <div class="form-group">
                            <label for="titulo_legenda_edit">Título da Legenda</label>
                            <input type="text" class="form-control" id="titulo_legenda_edit" name="titulo_legenda"
                                required>
                        </div>

                        <div class="form-group">
                            <label for="cor_legenda_edit">Cor da Legenda</label>
                            <input type="color" class="form-control" id="cor_legenda_edit" name="cor_legenda"
                                value="#000000">
                        </div>

                        <div class="form-group">
                            <label for="numero_apre_legenda_edit">Nº apre.</label>
                            <input type="number" class="form-control" id="numero_apre_legenda_edit"
                                name="numero_apre_legenda" required>
                        </div>
                    </div>

                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancelar</button>
                        <button type="submit" class="btn btn-primary">Salvar Alterações</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Modal para adicionar regra-->
    <div class="modal fade" id="addRuleModal" tabindex="-1" role="dialog" aria-labelledby="addRuleModalLabel"
        aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="addRuleModalLabel">Adicionar</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Fechar">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <form id="addRuleForm">
                    <div class="modal-body">
                        <input type="hidden" id="regra_id" name="regra_id"> <!-- Campo oculto para o ID da regra -->
                        <input type="hidden" name="painel_id" id="painel_id" value="{{ painel_id }}">

                        <div class="form-group">
                            <label for="valor_regra">Valor</label>
                            <input type="text" class="form-control" id="valor_regra" name="valor_regra" required>
                        </div>

                        <div class="form-group">
                            <label for="icone_regra">Ícone</label>
                            <input type="text" class="form-control" id="icone_regra" name="icone_regra">
                        </div>

                        <div class="form-group">
                            <label for="classe_regra">Classe</label>
                            <input type="text" class="form-control" id="classe_regra" name="classe_regra">
                        </div>

                        <div class="form-group">
                            <label for="substituicao_regra">Substituição de Ícone</label>
                            <div class="form-check">
                                <input type="checkbox" class="form-check-input" id="substituicao_regra"
                                    name="substituicao_regra" value="S">
                                <label class="form-check-label" for="substituicao_regra">Sim</label>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="cor_regra">Cor</label>
                            <input type="color" id="cor_regra" name="cor_regra" value="#000000" required>
                        </div>

                        <div class="form-group">
                            <label for="coluna_regra">Coluna</label>
                            <select class="form-control" id="coluna_regra" name="coluna_regra" required>
                                <!-- As opções serão preenchidas pelo JavaScript -->
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="celula_linha_regra">Cel/Lin</label>
                            <select class="form-control" id="celula_linha_regra" name="celula_linha_regra" required>
                                <option value="C">Célula</option>
                                <option value="L">Linha</option>
                            </select>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancelar</button>
                        <button type="button" class="btn btn-primary" id="saveRuleButton">Salvar</button>
                    </div>
                </form>
            </div>
        </div>
    </div>


    <!-- Modal para Editar Regra -->
    <div class="modal fade" id="editRuleModal" tabindex="-1" role="dialog" aria-labelledby="editRuleModalLabel"
        aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="editRuleModalLabel">Editar Regra</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Fechar">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <form id="editRuleForm" method="post">
                    <div class="modal-body">
                        <input type="hidden" id="edit_regra_id" name="regra_id">
                        <!-- Campo oculto para o ID da regra -->
                        <input type="hidden" name="painel_id" id="painel_id" value="{{ painel_id }}">

                        <div class="form-group">
                            <label for="edit_valor_regra">Valor</label>
                            <input type="text" class="form-control" id="edit_valor_regra" name="valor_regra" required>
                        </div>

                        <div class="form-group">
                            <label for="edit_icone_regra">Ícone</label>
                            <input type="text" class="form-control" id="edit_icone_regra" name="icone_regra">
                        </div>

                        <div class="form-group">
                            <label for="edit_classe_regra">Classe</label>
                            <input type="text" class="form-control" id="edit_classe_regra" name="classe_regra">
                        </div>

                        <div class="form-group">
                            <label for="edit_substituicao_regra">Substituição de Ícone</label>
                            <div class="form-check">
                                <input type="checkbox" class="form-check-input" id="edit_substituicao_regra"
                                    name="substituicao_regra" value="S">
                                <label class="form-check-label" for="edit_substituicao_regra">Sim</label>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="edit_cor_regra">Cor</label>
                            <input type="color" id="edit_cor_regra" name="cor_regra" value="#000000" required>
                        </div>

                        <div class="form-group">
                            <label for="edit_coluna_regra">Coluna</label>
                            <select class="form-control" id="edit_coluna_regra" name="coluna_regra" required>
                                <!-- As opções serão preenchidas pelo JavaScript -->
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="edit_celula_linha_regra">Cel/Lin</label>
                            <select class="form-control" id="edit_celula_linha_regra" name="celula_linha_regra"
                                required>
                                <option value="C">Célula</option>
                                <option value="L">Linha</option>
                            </select>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancelar</button>
                        <button type="submit" class="btn btn-primary">Salvar Alterações</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Gráfico Modal -->
    <div class="modal fade" id="addGraficoModal" tabindex="-1" role="dialog" aria-labelledby="addGraficoModalLabel"
        aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="addGraficoModalLabel">Adicionar Gráfico</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Fechar">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <form id="addGraficoForm" method="POST" action="/adicionar_grafico/{{ painel_id }}">
                    <div class="modal-body">

                        <div class="form-group">
                            <label for="titulo_grafico">Título</label>
                            <input type="text" class="form-control" id="titulo_grafico" name="titulo_grafico" required>
                        </div>
                        <div class="form-group">
                            <label for="sql_grafico">SQL</label>
                            <textarea class="form-control" id="sql_grafico" name="sql_grafico" required></textarea>
                        </div>
                        <div class="form-group">
                            <label for="numero_apre_grafico">Nº Apresentação</label>
                            <input type="number" class="form-control" id="numero_apre_grafico"
                                name="numero_apre_grafico" required>
                        </div>
                        <div class="form-group">
                            <label for="tipo_grafico">Tipo</label>
                            <select class="form-control" id="tipo_grafico" name="tipo_grafico" required>
                                <option value="pizza">Pizza</option>
                                <option value="barra">Barras Verticais</option>
                                <option value="linha">Linha</option>
                                <option value="barras_horizontais">Barras Horizontais</option>
                                <option value="dispersao">Dispersão</option>
                                <option value="area">Área</option>
                                <option value="card">Card</option>
                                <option value="rosca">Rosca</option>
                            </select>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Fechar</button>
                        <button type="submit" id="saveGraficoButton" class="btn btn-primary">Salvar</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <!-- Gráfico Edit Modal -->
    <div class="modal fade" id="editGraficoModal" tabindex="-1" role="dialog" aria-labelledby="editGraficoModalLabel"
        aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="editGraficoModalLabel">Editar Gráfico</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Fechar">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <form id="editGraficoForm" action="/editar_grafico/{{ painel_id }}" method="POST">
                    <div class="modal-body">
                        <input type="hidden" id="grafico_id_edit" name="grafico_id_edit">
                        <div class="form-group">
                            <label for="titulo_grafico_edit">Título</label>
                            <input type="text" class="form-control" id="titulo_grafico_edit" name="titulo_grafico_edit"
                                required>
                        </div>
                        <div class="form-group">
                            <label for="sql_grafico_edit">SQL</label>
                            <textarea class="form-control" id="sql_grafico_edit" name="sql_grafico_edit"
                                required></textarea>
                        </div>
                        <div class="form-group">
                            <label for="numero_apre_grafico_edit">Nº Apresentação</label>
                            <input type="number" class="form-control" id="numero_apre_grafico_edit"
                                name="numero_apre_grafico_edit" required>
                        </div>
                        <div class="form-group">
                            <label for="tipo_grafico_edit">Tipo</label>
                            <select class="form-control" id="tipo_grafico" name="tipo_grafico" required>
                                <option value="pizza">Pizza</option>
                                <option value="barra">Barras Verticais</option>
                                <option value="linha">Linha</option>
                                <option value="barras_horizontais">Barras Horizontais</option>
                                <option value="dispersao">Dispersão</option>
                                <option value="area">Área</option>
                                <option value="card">Card</option>
                            </select>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Fechar</button>
                        <button type="submit" id="saveGraficoEditButton" class="btn btn-primary">Salvar</button>
                    </div>
                </form>
            </div>
        </div>
    </div>





</body>
<script src="{{ url_for('static', filename='js/script.js') }}"></script>

</html>